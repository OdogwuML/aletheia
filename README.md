# Aletheia â€” Property Management System

> *From the Greek "á¼€Î»Î®Î¸ÎµÎ¹Î±" â€” truth, disclosure, unconcealedness.*
> Because every tenancy agreement and rent payment should be verifiably true.

Aletheia is a modern, blockchain-backed property management platform built for the Nigerian market. It gives landlords complete oversight of their property portfolio and tenants a seamless way to pay and manage their tenancy â€” with every lease and payment anchored to a decentralized, tamper-proof ledger.

---

## âœ¨ Features

### For Landlords
- **Portfolio Dashboard** â€” Overview of all buildings, occupancy rates, and revenue at a glance
- **Building & Unit Management** â€” Add properties, create units, and track each one individually
- **Tenant Invite Flow** â€” Invite tenants by email or phone; auto-generates a lease agreement on invite
- **Payment Tracking** â€” Immutable, append-only rent payment records across all properties
- **Maintenance Management** â€” View and update tenant maintenance requests per unit
- **Document Vault** â€” All lease agreements stored on decentralized storage, verifiable anytime
- **Export** â€” Download payment records as PDF or Excel

### For Tenants
- **Tenant Dashboard** â€” Quick view of tenancy, rent due, and payment history
- **Rent Payment** â€” Pay rent securely via Paystack (card, transfer, USSD) in â‚¦ Naira
- **Lease Access** â€” View and download auto-generated lease agreement at any time
- **Maintenance Requests** â€” Submit and track repair requests for their unit
- **Payment Receipts** â€” Every payment is chain-verified and downloadable

### Powered by Web3 (Invisible to Users)
- **Auto-Generated Lease Agreements** â€” PDF leases generated by the backend on tenant invite, instantly stored on **0G Storage** (no manual upload ever needed)
- **Chain-Verified Payments** â€” Every confirmed payment is anchored to the **0G Chain** (Galileo Testnet), producing a public, verifiable transaction hash
- **Managed Service Wallet** â€” All blockchain interactions handled server-side; neither landlords nor tenants need a crypto wallet

---

## ðŸ—ï¸ Tech Stack

| Layer | Technology |
|-------|-----------|
| **Backend** | Go (Golang) |
| **Database & Auth** | Supabase (PostgreSQL + RLS) |
| **Frontend** | HTML / CSS / Vanilla JS (SPA) |
| **Payments** | Paystack |
| **Email Notifications** | Resend |
| **SMS Notifications** | Termii |
| **Decentralized Storage** | 0G Storage (0G Labs) |
| **Verifiable Ledger** | 0G Chain â€” Galileo Testnet |
| **PDF Generation** | GoFPDF |
| **Hosting** | Vercel |
| **Currency** | â‚¦ Nigerian Naira only |

---

## ðŸ—‚ï¸ Project Structure

```
aletheia/
â”œâ”€â”€ web/                     # Frontend (SPA)
â”‚   â”œâ”€â”€ index.html           # Single-page app shell
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ app.css
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ router.js        # Hash-based SPA router
â”‚       â”œâ”€â”€ pages.js         # Page controllers
â”‚       â”œâ”€â”€ api.js           # API client
â”‚       â”œâ”€â”€ auth.js          # Auth module
â”‚       â””â”€â”€ utils.js         # Shared utilities
â”œâ”€â”€ tools/                   # Backend (Go)
â”‚   â”œâ”€â”€ cmd/server/
â”‚   â”‚   â””â”€â”€ main.go          # Entry point & route registration
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ handlers/        # Route handlers (auth, buildings, payments, ...)
â”‚   â”‚   â”œâ”€â”€ middleware/       # Auth & CORS middleware
â”‚   â”‚   â””â”€â”€ models/          # Data models & request types
â”‚   â”œâ”€â”€ go.mod
â”‚   â””â”€â”€ go.sum
â”œâ”€â”€ Design Guideline/        # UI reference screens (HTML mockups)
â”œâ”€â”€ gemini.md                # Project constitution & data schema
â”œâ”€â”€ task_plan.md             # Development phases & checklist
â””â”€â”€ .env.example             # Environment variable template
```

---

## ðŸš€ Getting Started

### Prerequisites
- Go 1.22+
- A [Supabase](https://supabase.com) project
- A [Paystack](https://paystack.com) account
- A [Resend](https://resend.com) account (email)
- A [Termii](https://termii.com) account (SMS)
- A 0G Labs service wallet private key

### 1. Clone the Repository

```bash
git clone https://github.com/OdogwuML/aletheia.git
cd aletheia
```

### 2. Set Up Environment Variables

Create a `.env` file in the root directory:

```bash
# Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# Paystack
PAYSTACK_SECRET_KEY=sk_live_...
PAYSTACK_PUBLIC_KEY=pk_live_...

# Resend (Email)
RESEND_API_KEY=re_...

# Termii (SMS)
TERMII_API_KEY=...

# 0G Labs (Blockchain)
OG_SERVICE_WALLET_PRIVATE_KEY=0x...
OG_RPC_URL=https://evmrpc-testnet.0g.ai
OG_STORAGE_NODE_URL=https://...

# App
APP_URL=http://localhost:8080
PORT=8080
```

### 3. Run the Backend

```bash
cd tools
go mod tidy
go run cmd/server/main.go
```

The server starts at `http://localhost:8080`.

### 4. Open the Frontend

The Go server serves the `web/` folder as static files. Just visit `http://localhost:8080` in your browser.

---

## ðŸ”‘ API Overview

All API routes are under `/api`. Authenticated routes require a `Bearer` token in the `Authorization` header.

| Method | Endpoint | Auth | Description |
|--------|----------|------|-------------|
| `POST` | `/api/auth/signup` | âŒ | Register a new user |
| `POST` | `/api/auth/login` | âŒ | Log in and receive JWT |
| `POST` | `/api/auth/accept-invite` | âŒ | Accept tenant invitation |
| `GET` | `/api/invitations/verify` | âŒ | Verify an invite token |
| `POST` | `/api/webhooks/paystack` | âŒ | Paystack payment webhook |
| `GET` | `/api/dashboard/landlord` | âœ… landlord | Landlord dashboard stats |
| `GET` | `/api/dashboard/tenant` | âœ… tenant | Tenant dashboard data |
| `GET/POST` | `/api/buildings` | âœ… landlord | List / create buildings |
| `GET/PUT` | `/api/buildings/:id` | âœ… landlord | Get / update building |
| `GET/POST` | `/api/buildings/:id/units` | âœ… landlord | List / create units |
| `POST` | `/api/invitations` | âœ… landlord | Send tenant invite |
| `GET` | `/api/invitations` | âœ… landlord | List pending invitations |
| `POST` | `/api/payments/initialize` | âœ… tenant | Initialize a rent payment |
| `GET` | `/api/payments` | âœ… | Payment history |
| `POST/GET` | `/api/maintenance` | âœ… | Create / list maintenance requests |
| `PUT` | `/api/maintenance/:id/status` | âœ… landlord | Update request status |
| `POST/GET` | `/api/documents` | âœ… | Upload / list documents |

---

## ðŸ” Security

- All routes are protected with Supabase JWT verification
- Row-Level Security (RLS) enforced at the database level
- Tenants can only access data for their own unit
- Payment records are immutable (append-only by design)
- All blockchain keys are server-side only â€” users are never exposed to Web3

---

## ðŸ“„ License

This project is licensed under the MIT License.

---

## ðŸ™Œ Built for the 0G Labs Hackathon

Aletheia integrates **0G Storage** and **0G Chain** to bring trustless, verifiable property management to Nigerian landlords and tenants â€” without requiring any Web3 knowledge from users.

> *Every lease. Every payment. Verified on-chain. Invisible to the user.*